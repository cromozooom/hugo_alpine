<div x-data="queryManager">
  <div>
    <div class="badge text-bg-primary">Add new Query in library</div>
  </div>
  <div class="card mt-2 shadow">
    <div class="d-flex align-items-center border-bottom p-2">
      <div class="flex-grow-1">
        <h2 class="h6 mb-0">Add New Entry</h2>
      </div>
      <div class="d-flex gap-1">
        <button
          class="btn btn-outline-primary text-nowrap"
          @click="downloadDictionary">
          Download JSON
        </button>
        <input
          class="form-control"
          type="file"
          @change="uploadDictionary"
          accept="application/json" />
      </div>
    </div>
    <div class="d-flex gap-3 p-2">
      <div class="">
        <label class="form-label" for="entity">Entity</label>
        <select
          class="form-select"
          x-model="selectedEntity"
          @change="idQuery = ''; isIdUnique = true;">
          <option value="">Select entity</option>
          <template x-for="entity in entities" :key="entity">
            <option x-bind:value="entity" x-text="entity"></option>
          </template>
        </select>
      </div>
      <div>
        <label class="form-label" for="idQuery">Name</label>
        <input
          :disabled="!selectedEntity"
          class="form-control"
          type="text"
          id="idQuery"
          @input="checkUniqueId"
          x-model="idQuery"
          required />

        <span x-show="!isIdUnique" style="color: red;"
          >must be unique/entity.</span
        >
      </div>
      <div class="">
        <label class="form-label" for="query">Query</label>
        <input
          class="form-control"
          type="text"
          id="query"
          x-model="query"
          required />
      </div>
      <div class="d-flex flex-column xalign-items-end">
        <label class="form-label text-muted" for="field">Add</label>

        <button
          class="btn btn-outline-primary text-nowrap d-flex align-items-center gap-2
    "
          @click="addEntry">
          {{ partial "svg/fa/regular-plus.svg" (dict "class" "size1") }}
          Entry
        </button>
      </div>
    </div>
  </div>
</div>
